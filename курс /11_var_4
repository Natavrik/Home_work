#include <stdio.h>
#include <math.h>
#include <unistd.h>
#include <stdlib.h>
#include <time.h>

#define POLZOVATEL_PROIGRAL 1
//сделать так что бы счет не был отрицательным, и оптимизировать так что бы можно было брать в долг. 
void WIN (int*, int*, int*, int*);
void GENER (int);
int EndGame(int,int,int,int*);
void clear(void);
void clearStream (void);

int main ()
{
    int SCHIT, STAVKA, summa, k, r, U, SS; 
    char Again = 'y';
    SCHIT = 100;
    while(Again == 'y')
    { 
            clear();
   WIN(&U,&STAVKA,&summa,&SCHIT);

    printf ("\x1b[1;33mТеперь Крупье бросит кости..\n\n\x1b[0m");
    usleep(2000000);
  //   system("sleep 2");
    srand(time(NULL));
    
    k=rand()%6+1;
    r=rand()%6+1;
    
    GENER (k);
    GENER (r);
    
    summa=r+k;
    
    printf ("\n\n\x1b[1;33mСумма выпавших костей = \x1b[1;37m%d\n \x1b[0m", summa);
	
    if (EndGame(U,STAVKA,summa,&SCHIT)){
		printf("Вы проиграли !\n\n");
	    return 0;
	}
clearStream();

    printf("Желаете продолжить?\n  (Введите y для продолжения)\n");
    scanf("%c", &Again);
    }

    return 0;
}

void GENER (int k)
{   
    if (k==1)
    {
        printf ("     _______  \n"
                "   /|       | \n"
                "   /|   *   | \n"
                "   /|       | \n"
                "   /////////  \n");
    }
    
    if (k==2)
    {
        printf ("     _______  \n" 
                "   /| *     | \n"
                "   /|       | \n"
                "   /|     * | \n"
                "   /////////  \n");
    }
    
    if (k==3)
    {
        printf ("     _______  \n"
                "   /| *     | \n"
                "   /|   *   | \n"
                "   /|     * | \n"
                "   /////////  \n");
    }
    
    if (k==4)
    {
        printf ("     _______  \n"
                "   /| *   * | \n"
                "   /|       | \n"
                "   /| *   * | \n"
                "   /////////  \n");
    }
    
    if (k==5)
    {
        printf ("     _______  \n"
                "   /| *   * | \n"
                "   /|   *   | \n"
                "   /| *   * | \n"
                "   /////////  \n");
    }
    
    if (k==6)
    {
        printf ("     _______  \n"
                "   /| * * * | \n"
                "   /| * * * | \n"
                "   /| * * * | \n"
                "   /////////  \n");
    }    
}    




void WIN (int* U , int* STAVKA, int* summa, int* SCHIT )
{
	
    do
    {
    printf ("Просим Вас, уважаемый игрок, выбрать одно число в диапазоне от 2 до 12\n"
            "Введите Ваше число: ");
    while(scanf ("%d", U) != 1 ){
	
    printf("Хах, вероятно Вы промахнулись,\n ничего, со всеми бывает\n   попробуйте снова!\n");
	clearStream();
	}
    }
    while ((*U<2) || (*U>12));
    
    printf ("\x1b[1;33m Сделайте вашу ставку: \x1b[0m");
    do{
	scanf ("%d", STAVKA);
	if (*STAVKA > *SCHIT){
		printf("||\n");
	}
	}
	while (*STAVKA <=0 || *STAVKA>*SCHIT);
    
    
    printf ("\x1b[1;33m Текущий счёт:\x1b[0m  \x1b[1;37m%d\n \x1b[0m", *SCHIT);
    
}
    
    
    
int  EndGame(int U , int STAVKA, int summa, int *SCHIT)
{ 
	if  (summa==U)
    {
        printf ("           Выйграшная стратегия! \n   "
                "      Вы получаете 4х ставку!\n");
        *SCHIT+=STAVKA*4 ;
        
        printf (" \n для проврки::::::: \n"
                "__________\nvasha stavka___ %d\ntekyshii scit___ %d\n__________\n", STAVKA, *SCHIT);
    }
	
    else if ((summa<7) && (U<7))
    {
        printf ("         Выйграшная стратегия! \n"
                "     Вы получаете удвоенную ставку!\n");
        *SCHIT+=STAVKA;
        
        printf (" \n для проврки::::::: \n"
                "__________\nvasha stavka___ %d\ntekyshii scit___ %d\n__________\n", STAVKA, *SCHIT);
    }
    else if  ((summa>7) && (U>7))
    {
        printf ("         Выйграшная стратегия! \n  "
                "     Вы получаете удвоенную ставку!\n");
        
        *SCHIT+=STAVKA;
        
        printf (" \n для проврки::::::: \n"
                "__________\nvasha stavka___ %d\ntekyshii scit___ %d\n__________\n", STAVKA, *SCHIT);
    }
    else 
    {
    	printf("%d	%d\n",STAVKA, *SCHIT);
    	 // (SCHIT>=0){
    	*SCHIT-=STAVKA;
		if (*SCHIT <=0){
			printf ("\n\n\n");
			return POLZOVATEL_PROIGRAL;
		}
        printf ("        К сожалению, Вы проиграли Вашу ставку...\n"
                "         деньги перешли на счёт банка Казино.\n"
                "               Ваш текущий счёт: %d\n", *SCHIT);
    	 	
        
    }
	return 0;
}

void clear()
{
    printf("\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
    "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n");
}



void clearStream()
{
  int c;
  while((c = getchar()) && c != EOF && c != '\n')
    ;
}
